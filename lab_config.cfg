
! Big Cloud Fabric 4.7.0 (bcf-4.7.0 #186)
! Current Time: 2018-08-31 23:25:40 UTC
!
version 1.0

! ntp
ntp server 0.bigswitch.pool.ntp.org
ntp server 1.bigswitch.pool.ntp.org
ntp server 2.bigswitch.pool.ntp.org
ntp server 3.bigswitch.pool.ntp.org

! aaa
aaa accounting exec default start-stop local

! local
local node
  hostname controller
  interface management
    !
    ipv4
      ip 10.10.12.20/24 gateway 10.10.12.1
      method manual
      dns server 10.10.0.1
    !
    ipv6
      method manual

! user
user admin
  full-name 'Default admin'
  hashed-password method=PBKDF2WithHmacSHA512,salt=nfvIXJKlw5nIMBdmHh-AqA,rounds=25000,ph=true,n6aktUBO-4QCw_8oXcpeAbeqfC16DWnSy0zKCkJWIyow5akzNer3olZ0q1WawLVsZ0pHcMDa3LxWVMEAb0C1ng

! group
group admin
  associate user admin

! controller
controller
  cluster-name bigswitchlabs
  access-control
    !
    access-list api
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list gui
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list mininet-tun-p
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list mininet-tun-v
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list ns-api
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list ssh
      1 permit from ::/0
      2 permit from 0.0.0.0/0
    !
    access-list vce-api
      1 permit from ::/0
      2 permit from 0.0.0.0/0

! switch
switch R1L1
  fabric-role leaf
  leaf-group R1
  mac 00:00:00:02:00:01

switch R1L2
  fabric-role leaf
  leaf-group R1
  mac 00:00:00:02:00:02

switch R2L1
  fabric-role leaf
  leaf-group R2
  mac 00:00:00:02:00:03

switch R2L2
  fabric-role leaf
  leaf-group R2
  mac 00:00:00:02:00:04

switch R3L1
  fabric-role leaf
  leaf-group R3
  mac 00:00:00:02:00:05

switch R3L2
  fabric-role leaf
  leaf-group R3
  mac 00:00:00:02:00:06

switch S1
  fabric-role spine
  mac 00:00:00:01:00:01

switch S2
  fabric-role spine
  mac 00:00:00:01:00:02

switch S3
  fabric-role spine
  mac 00:00:00:01:00:03

! interface-group
interface-group FW-01
  member switch R3L1 interface R3L1-eth5
  member switch R3L2 interface R3L2-eth5

interface-group R1H1
  member switch R1L1 interface R1L1-eth5
  member switch R1L2 interface R1L2-eth5

interface-group R1H2
  member switch R1L1 interface R1L1-eth6
  member switch R1L2 interface R1L2-eth6

interface-group R2H1
  member switch R2L1 interface R2L1-eth5
  member switch R2L2 interface R2L2-eth5

interface-group R2H2
  member switch R2L1 interface R2L1-eth6
  member switch R2L2 interface R2L2-eth6

interface-group RTR-01
  member switch R3L1 interface R3L1-eth6
  member switch R3L2 interface R3L2-eth6

interface-group RTR-02
  member switch R3L1 interface R3L1-eth7
  member switch R3L2 interface R3L2-eth7

! tenant
tenant External
  logical-router
    route 10.0.0.0/24 next-hop tenant system
    route 10.0.1.0/24 next-hop tenant system
    route 10.0.2.0/24 next-hop tenant system
    route 0.0.0.0/0 next-hop next-hop-group rtr
    interface segment Ext-01
      ip address 10.0.3.1/24
    interface segment Ext-02
      ip address 10.0.4.1/24
    interface tenant system
    !
    next-hop-group rtr
      ip 10.0.3.2
      ip 10.0.4.2
  segment Ext-01
    member interface-group RTR-01 vlan untagged
  segment Ext-02
    member interface-group RTR-02 vlan untagged

tenant Green
  logical-router
    route 0.0.0.0/0 next-hop tenant system
    interface segment QA
      ip address 10.0.2.1/24
    interface tenant system
  segment QA
    member interface-group R2H2 vlan untagged

tenant Red
  !
  logical-router
    apply policy-list FireWall
    route 0.0.0.0/0 next-hop tenant system
    interface segment App
      ip address 10.0.1.1/24
    interface segment FW-01
      ip address 10.0.5.1/24
    interface segment Web
      ip address 10.0.0.1/24
    interface tenant system
    !
    next-hop-group ServiceNode
      ip 10.0.5.2
    policy-list FireWall
      10 permit segment-interface Web any to tenant Red segment App next-hop next-hop-group ServiceNode
      11 permit any to any
  segment App
    member interface-group R2H1 vlan untagged
  segment FW-01
    member interface-group FW-01 vlan untagged
  segment Web
    member interface-group R1H1 vlan untagged
    member interface-group R1H2 vlan untagged

tenant system
  logical-router
    route 0.0.0.0/0 next-hop tenant External
    interface tenant External
    interface tenant Green
    interface tenant Red

 		
